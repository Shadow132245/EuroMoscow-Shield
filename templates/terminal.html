<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>EuroMoscow Shield | Terminal</title>
    <link rel="icon" type="image/png" href="{{ url_for('static', filename='logo.png') }}">
    <link href="https://fonts.googleapis.com/css2?family=VT323&family=Rajdhani:wght@500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        body { margin: 0; background: #000; color: #0f0; font-family: 'VT323', monospace; font-size: 20px; overflow: hidden; height: 100vh; display: flex; flex-direction: column; }
        
        /* Navbar Style (Same as others but Black/Green) */
        nav { height: 70px; background: #111; border-bottom: 2px solid #0f0; display: flex; align-items: center; justify-content: space-between; padding: 0 20px; z-index: 100; flex-shrink: 0; font-family: 'Rajdhani', sans-serif;}
        .brand { font-size: 20px; font-weight: 800; color: #fff; text-decoration: none; display: flex; gap: 10px; align-items: center; } .brand span { color: #0f0; }
        .nav-items { display: flex; gap: 5px; align-items: center; }
        .nav-link { color: #888; text-decoration: none; font-weight: 600; font-size: 12px; padding: 6px 8px; border-radius: 4px; display: flex; align-items: center; gap: 5px; border: 1px solid transparent; transition: 0.3s; }
        .nav-link:hover { color: #fff; border-color: #333; }
        .nav-link.active { border-color: #0f0; color: #0f0; }
        
        @media (max-width: 900px) { .nav-link span { display: none; } .nav-link i { font-size: 16px; } nav { padding: 0 10px; } }

        /* Terminal Body */
        #terminal { padding: 20px; flex: 1; display: flex; flex-direction: column; position: relative; }
        
        /* CRT Effect */
        #terminal::before { content: " "; display: block; position: absolute; top: 0; left: 0; bottom: 0; right: 0; background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06)); z-index: 2; background-size: 100% 2px, 3px 100%; pointer-events: none; }

        #output { flex: 1; overflow-y: auto; white-space: pre-wrap; margin-bottom: 20px; z-index: 1; }
        .input-line { display: flex; align-items: center; border-top: 1px solid #333; padding-top: 10px; z-index: 1; }
        .prompt { color: #f0f; margin-right: 10px; font-weight: bold; }
        input { background: transparent; border: none; color: #fff; font-family: 'VT323', monospace; font-size: 20px; flex: 1; outline: none; }
        
        .success { color: #0ff; } .error { color: #f00; } .info { color: #ff0; }
        ::-webkit-scrollbar { width: 8px; } ::-webkit-scrollbar-track { background: #000; } ::-webkit-scrollbar-thumb { background: #0f0; }
    </style>
</head>
<body>
    <nav>
        <a href="/" class="brand"><i class="fas fa-shield-virus"></i> EURO<span>SHIELD</span></a>
        <div class="nav-items">
            <a href="/" class="nav-link"><i class="fab fa-python"></i> <span>PY ENC</span></a>
            <a href="/decryptor" class="nav-link"><i class="fas fa-unlock"></i> <span>PY DEC</span></a>
            <a href="/js-shield" class="nav-link"><i class="fab fa-js"></i> <span>JS ENC</span></a>
            <a href="/js-decryptor" class="nav-link"><i class="fas fa-unlock-alt"></i> <span>JS DEC</span></a>
            <a href="/lua-shield" class="nav-link"><i class="fas fa-gamepad"></i> <span>LUA ENC</span></a>
            <a href="/lua-decryptor" class="nav-link"><i class="fas fa-key"></i> <span>LUA DEC</span></a>
            <a href="/terminal" class="nav-link active"><i class="fas fa-terminal"></i> <span>TERM</span></a>
            <a href="/docs" class="nav-link"><i class="fas fa-book"></i> <span>API</span></a>
        </div>
    </nav>

    <div id="terminal">
        <div id="output">
   _____                 __  __                                  
  | ____|_   _ _ __ ___ |  \/  | ___  ___  ___ _____      __     
  |  _| | | | | '__/ _ \| |\/| |/ _ \/ __|/ __/ _ \ \ /\ / /     
  | |___| |_| | | | (_) | |  | | (_) \__ \ (_| (_) \ V  V /      
  |_____|\__,_|_|  \___/|_|  |_|\___/|___/\___\___/ \_/\_/       
                                                                 
  SHIELD v11.0 [Terminal Mode]
  Type 'help' for commands.
        </div>
        <div class="input-line">
            <span class="prompt">root@euromoscow:~#</span>
            <input type="text" id="cmd" autofocus autocomplete="off" spellcheck="false">
        </div>
    </div>

    <script>
        const output = document.getElementById('output');
        const input = document.getElementById('cmd');

        function print(text, className='') {
            const line = document.createElement('div');
            line.className = className;
            line.textContent = text;
            output.appendChild(line);
            output.scrollTop = output.scrollHeight;
        }

        async function processCommand(cmd) {
            const args = cmd.trim().split(' ');
            const command = args[0].toLowerCase();
            const payload = args.slice(1).join(' ');

            if (command === 'clear' || command === 'cls') output.innerHTML = '';
            else if (command === 'help') {
                print("Available Commands:", "info");
                print("  encrypt [code]   - Python Encrypt");
                print("  jsenc [code]     - JS Encrypt");
                print("  luaenc [code]    - Lua Encrypt");
                print("  decrypt [code]   - Auto Decrypt (All)");
                print("  clear            - Clear screen");
            } 
            else if (['encrypt', 'jsenc', 'luaenc', 'decrypt'].includes(command)) {
                if(!payload) { print("Error: No code provided.", "error"); return; }
                print(`Processing [${command}]...`, "info");
                
                let action = command === 'decrypt' ? 'decrypt' : 'encrypt';
                let lang = 'python';
                if(command === 'jsenc') lang = 'javascript';
                if(command === 'luaenc') lang = 'lua';
                
                // For terminal, use default strong options
                let options = ['rename', 'marshal', 'xor', 'hex', 'base64'];

                try {
                    const res = await fetch('/process', {
                        method: 'POST', headers: {'Content-Type': 'application/json'},
                        body: JSON.stringify({ code: payload, action, lang, options })
                    });
                    const data = await res.json();
                    print("---------------- RESULT ----------------", "success");
                    print(data.result);
                    print("----------------------------------------", "success");
                } catch(e) { print("Error: Connection failed.", "error"); }
            } 
            else if (cmd.trim() !== '') print(`Command not found: ${command}`, "error");
        }

        input.addEventListener('keydown', function(e) {
            if (e.key === 'Enter') {
                const val = this.value;
                print(`root@euromoscow:~# ${val}`);
                processCommand(val);
                this.value = '';
            }
        });
        document.body.addEventListener('click', () => input.focus());
    </script>
</body>
</html>
